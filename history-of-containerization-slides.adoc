= L'√©volution de la conteneurisation, de 1979 √† aujourd'hui
// classic AsciiDoctor attributes
:icons: font
:imagesdir: images
// Activate syntax highlighting with highlight.js
:source-highlighter: highlightjs
// We must enable experimental attribute to display Keyboard, button, and menu macros
:experimental:
:lb: pass:[<br> +]
// reveal.js attributes
:customcss: styles/myCustomCSS.css
:revealjs_theme: white
// To turn off figure caption labels and numbers
//:figure-caption!:
// Same for examples
//:example-caption!:
// To turn off ALL captions (see https://github.com/asciidoctor/asciidoctor/issues/2804)
:caption:

Thomas SCHWENDER

icon:github[] https://github.com/Ardemius/[Ardemius] / icon:twitter[role="blue"] https://twitter.com/thomasschwender[@thomasschwender] +
image:StarTECH-logo.png[Logo StarTECH]
//image:softeam-docaposte-logo.png[Logo Softeam Docaposte,200]
image:Softeam-software-crafter-logo.png[Logo Crafter,200,200]

== Disclaimer

Ce talk n'a *PAS* vocation √† expliquer les commandes Docker, Kubernetes ou celles d'un quelconque container runtime üôÇ 

[NOTE.speaker]
--
Rappel de l'abstract :

La plupart d'entre nous ont d√©couvert le concept de conteneur en 2013 avec l'arriv√©e de Docker. +
Aujourd'hui, avec l'av√®nement du Cloud et de Kubernetes, les conteneurs sont partout autour de nous.

Toutefois, l'histoire de la conteneurisation reste globalement m√©connue. +
Qui pour se souvenir que tout a finalement commenc√© en 1979 avec l'apparition de chroot, qui marqua le d√©but de l'isolation des processus ? +
Qu'il a fallu attendre d'avoir les cgroups (2008), puis plus tard les user namespaces (2013) pour qu'enfin Docker puisse voir le jour ? +
Que la g√©n√©ralisation des containers, cons√©quence de l'adoption de Kubernetes par tous les Cloud providers (2018), entra√Æna l'apparition des sandbox runtimes et des daemonless runtimes ?

Au cours de ce talk, nous allons d√©tailler les grandes √©tapes qui ont marqu√© l'histoire de la conteneurisation, et expliquer POURQUOI elles ont eu lieu. +
L'objectif est qu'en sortant, vous ayez compris quelle orientation a suivi la conteneurisation depuis toutes ces ann√©es, et ce vers quoi nous allons.
--

== Mais c'est quoi un conteneur aujourd'hui ?

La m√™me chose qu'hier ! üòâ +
Tout simplement un *groupe de processus isol√©s les uns des autres* par un certain moyen.

[NOTE.speaker]
--
On commence par un rappel simple
--

== Chronologie

TODO : ajouter ici un screenshot de la chronologie sur Timetoast

[NOTE.speaker]
--
Ne pas tout de suite donner le lien, afin de garder le public concentr√© üòâ +
Ce dernier sera donn√© dans les ressources en fin de talk
--

[.columns.fontFor2ColLayout]
== Les ann√©es 70s, les pr√©mices de la conteneurisation

[.column.has-text-justified]
--
L'id√©e originale de conteneur a germ√© dans les ann√©es 70s sur les syst√®mes Unix, quand l'on a eu besoin de *mieux isoler le code applicatif*.

A cette √©poque les ordinateurs √©taient tr√®s chers et donc tr√®s *rares*, il fallait donc pouvoir les *exploiter au maximum*.
--

[.column.has-text-justified]
--

.Ken Thompson et Dennis Ritchie, inventeurs d'UNIX, devant un PDP-11 vers 1972
image::1972_Unix-Ken-Thompson-Dennis-Ritchie-PDP-11.jpg[]

--

[NOTE.speaker]
--
Concernant l'image, il s'agit d'un PDP-11 avec Ken Thompson et Dennis Ritchie √† c√¥t√© de lui. +
Pour rappel, ce sont les cr√©ateurs d'Unix et du langage C, et Ken Thompson est √©galement le cr√©ateur du premier shell Unix en 1971, sur la 1ere version d'Unix. +
Cette photo, c'est l'alter ego informatique de "Trois hommes dans un salon" avec Brassens, Brel et Ferr√© en 1969, c'est un moment d'histoire...
--

[.columns.fontFor2ColLayout]
== 1979 - *grande √©tape* : `chroot`

[.column.has-text-justified]
--
L'appel syst√®me `chroot` a √©t√© cr√©√© en 1979, pendant le d√©veloppement de la version 7 d'Unix.

`chroot` permet de *changer le r√©pertoire racine d'un processus et de ses enfants*.

Cela a marqu√© le d√©but de l'*isolation des processus*, en restreignant l'acc√®s d'une application √† une arborescence de fichiers donn√©es.
--

[.column.has-text-justified]
--
image::chroot-example.png[]

La s√©curit√© s'en voit renforc√©e, l'environnement isol√© ne permettant th√©oriquement pas √† une attaque de "sortir" sur un syst√®me ext√©rieur.
--

[NOTE.speaker]
--
*System call* : a request for the operating system to do something on behalf of the user's program. The system calls are functions used in the kernel itself.

"Chroot marked the beginning of container-style process isolation by restricting an application's file access to a specific directory "the root" and its children. A key benefit of chroot separation was improved system security, such that an *isolated environment could not compromise external systems* if an internal vulnerability was exploited."

Chroot was added to BSD in 1982.
--

[.columns.fontFor2ColLayout]
== 2000/03 : FreeBSD `Jails`

[.column.has-text-justified]
--
*Jails* permet de partitionner un syst√®me FreeBSD en *sous-syst√®mes ind√©pendants*, appel√©s _"jails"_, avec la possibilit√© d'assigner √† chacun d'eux une adresse IP sp√©cifique.
--

[.column]
--
image::FreeBSD-jails-example.png[width=500]
--

[NOTE.speaker]
--
Jails were first introduced in FreeBSD OS version 4.0, that was released on *March 14, 2000*
--

[.columns.fontFor2ColLayout]
== 2001 : Linux `VServer`

[.column.has-text-justified]
--
Comme FreeBSD Jails, Linux VServer est un *m√©canisme de "prison"*.

Il permet de *partitionner des ressources* (syst√®mes de fichiers, adresses r√©seau, m√©moire) au sein de l'OS, via l'ajout de capacit√©s de virtualisation de l'OS au noyau Linux.
--

[.column.has-text-justified.is-two-fifth]
--
image::Linux-VServer-logo.png[width=300]

Son principal inconv√©nient √©tait qu'il imposait de *patcher le noyau Linux*.
--

[NOTE.speaker]
--
Jacques G√©linas created the VServer project, which according to the 0.0 version‚Äôs change log allowed "running several general purpose Linux server on a single box with a high degree of Independence and security."

The Linux-VServer solution was the *first effort on Linux* to "separate the user-space environment into distinct units (Virtual Private Servers) in such a way that each VPS looks and feels like a real server to the processes contained within." +
Linux-VServer is a virtual private server implementation that was created by *adding operating system-level virtualization capabilities to the Linux kernel*. +
Ce projet permet d'ex√©cuter un ou plusieurs environnements d'exploitation (syst√®mes d'exploitation sans le noyau) ; autrement dit, il *permet d'ex√©cuter une ou plusieurs distributions sur une distribution*.

Patcher le kernel Linux : une *charge en plus* pour les distributeurs et les sysadmin.

Last stable patch was released in 2006
--

[.columns.fontFor2ColLayout.is-vcentered]
== 2002/08 : 1ers Linux namespaces

[.column.has-text-justified]
--
Les `namespaces` sont une *fonctionnalit√© du noyau Linux* permettant √† vos processus d'√™tre s√©par√©s des autres processus tournant sur l'OS.

Ils permettent aux processus de disposer chacun de leurs *propres ressources* : r√©seau, PID, utilisateurs, hostname, mounts, etc.

Les namespaces *"limitent ce que l'on peut voir"*
--

[.column.has-text-justified]
--
image::linux-namespace-schema.png[]
--

[NOTE.speaker]
--
Namespaces can be created using the `unshare` program.
--

[.columns.fontFor2ColLayout.is-vcentered]
=== mount namespaces

[.column.has-text-justified]
--
Le 1er type de namespaces √† avoir √©t√© ajout√© au noyau Linux, version 2.4.19, est le *mount namespaces* le 2002/08/03.
--

[.column]
--
.J√©r√¥me Petazzoni (Docker), DockerCon 2015
image::mount-namespaces-description.jpg[]
--

== Ressources

TO BE COMPLETED

== Des questions ?

== Merci !




Ce qu'est Docker : 
Docker a fourni un wrapping simple et facile d'utilisation de ces fonctionnalit√©s du kernel Linux (et en a √©galement apport√© d'autres √©galement)
Nicolas De Loof : Docker permet de lancer ses process de fa√ßon isol√©e

Linux namespaces : bien parler des user namespaces, et de la conf de Solomon Hykes de 2013 qui met ces derniers en avant comme ayant permis la cr√©ation de Docker

*Why Docker ?* by Solomon Hykes : La grande raison de l'√©poque : *shipping software from A to B, reliably and automatically* (2013)
Et parler des vrais conteneurs √† cette occasion (dans mes notes)





